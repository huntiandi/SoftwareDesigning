# 计算机组成与体系结构

## 一、数据表示

### 1、进制的转换

#### 1.1基本概念：

- **权**：是在进制中的实际大小，例如1234这个数 1所在的权是1000，2所在的权是100
- **位权**：而位权则代表了在某种进制下所代表的位置，例如1的位权是10的3次方，代表了他是千位，而不是代表它实际大小是1000；
  			也就是说权代表了某个位置的实际大小，而位权代表了某个数值所在位置的权值
- **权值**：权值是基数乘以权的结果

#### 1.2整数转换

- **十进制转为R进制(2/8/16)**：使用短除法将十进制除以要转换的进制，直道商为0，将余数倒着拼起来；
- **R进制转为十进制**：将R进制按权展开，将权值相加即可得到十进制数；
- **二进制与8/16进制互转**：2转8是3位一组不足补零，然后每一组按权展开将每组的权值拼接；16进制是四位一组转换同理
- **8/16转二进制**：每一位使用短除法得到一组数(不足补零)，最后将值拼接好；如果是8/16互转使用2或10中转一下即可

#### 1.3小数转换

- **十进制转为R进制**：整数部分按上面的方法正常转换，小数部分将小数乘R之后区整数部分的值知道小数部分为0或者达到精度
- **R进制转为十进制**：整数部分按权展开将权值相加，小数部分也是但是小数部分的权从-1次方开始

### 2、原码补码反码

#### 2.1原码

- 原码：就是符号位加上本身的真值，符号位0表示正数，1表示负数；取值范围[1111 1111，0111 1111]即[-127,127]；也就是-(2^n-1 -1)~(2^n-1 -1)【n代表了数位例如8位】

#### 2.2反码

- 反码：正数的反码还是原码，负数的反码是符号位不变其他位取反；取值范围-(2^n-1 -1)~(2^n-1 -1)

#### 2.3补码

- 补码：正数的补码还是原码，负数的补码是反码加一；取值范围-(2^n-1)~(2^n-1 -1)[-128,127]；补码取值范围比原码反码大1，是因为补码的正0负0都一样；所以补码比原码/反码多了一个本来的负0也就是10000000即-128	
- 移码：不论正负将补码的符号位取反即可

### 3、浮点数运算

#### 3.1基本概念

- 浮点数：其实就是科学计数法例如M\*R^e==例==>1.19\*10^3=1190
  		其中M称为尾数，R称为基数，e称为指数
- **运算**：在对浮点数进行运算时，有三个步骤：对阶、尾数计算、格式化
  1. 对阶要对高阶，即要将低次方的数转为高次方的数；
  2. 尾数计算就是相加；
  3. 格式化即小数点左边的数不能为0也不能超过一位数，如果是0降阶，如果是两位数以上升阶

## 二、计算机结构

### 1、基本概念

* 现代计算机都是基于冯诺依曼结构进行设计的即：控制器，运算器，存储器，输入设备，输出设备；
  * 控制器从内存取出指令，翻译指令并拿相应的一些程序通过运算器进行计算，最后再把运算完的东西写回内存等等，之后把结果放回内存
* 简单来说计算机由主机+外设组成；而主机只包含了CPU和内存，其他的都被称为外设例如显卡声卡等等和生活中的主机不一样那个是主机箱
* 主要介绍CPU，CPU主要由运算器+控制器组成

### 2、CPU的组成

1. **运算器**：算术逻辑单元，累加寄存器，数据缓冲寄存器和状态条件寄存器组成；主要用来执行算术和逻辑运算
   - ALU：处理数据对数据进行加工：算术单元和逻辑单元
   - AC：累加器为ALU提供一个工作区，运算器至少有一个ALU
   - DR：对内存进行读写操作时暂时存放内存的指令或数据，是CPU和内存外部设备之间的中转站
   - PSW：保存运算后的各种状态：进位标志C，溢出标志V，结果为0Z，结果为负N，中断I，方向标志D，等等
2. **控制器**：用于控制整个CPU的工作，要完成取指令，分析指令，执行指令操作
   - IR：指令寄存器，指令暂存之后通过译码器产生操作指令
   - PC：程序计数器，寄存信息和计数器功能
   - AR：地址寄存器，内存和CPU存在速度差，保持地址信息
   - ID：指令译码器，指令由操作码地址码，译码器原来翻译
3. **寄存器**：是cpu中的存储单元，
   - 因为读取内存中的数据很慢，而寄存器可以提供高速的读写操作减少访问内存次数提升cpu执行效率；
   - 因为内存的速度远远比不少cpu执行效率所以会有L1,2,3三级缓存存储刚刚读取的或者循环使用的数据
   - 读取时先读L1读到了就锁住L1行然后进行读取再解锁再load到cpu进行操作，如果L1没有就去L2找锁读解锁复制到L1再重复一次到CPU,L3同理，内存比较麻烦要通知总线占带宽之后锁内存，读指令等响应响应后放入L3再一级级放入CPU即可
4. **MESI协议**：多核CPU会带来一个问题那就是缓存一致性，因为每个CPU都有自己的缓存，而写回内存时到底存谁的就成了问题，因此有了一致性协议例如MESI协议
   - MESI：M是modified(修改)，E是exclusive(独有)，S是shared(分享)，I是invalid(无效的)
   - M是该数据已经被修改但还没有写入主存，E是缓存与主存相同，缓存是主存的一个备份，S是有效缓存，但其他处理器也有可能有此缓存并不唯一，I就是无效缓存需要重新获取了
   - mesi的简单工作原理
     1. 如果现在有两个cpu，那么cpu1对主存中的a读取时会先将其读取到缓存行L1中并将a的状态设置为E；
     2. 此时cpu2也读取了a此时cpu1和2中的a的状态都变成了S
     3. cpu1将a进行了修改并通过bus通知了其他处理器，此时a的状态变成了M并且cpu2中的a变成了I，(如果两个cpu都进行了对a的修改，那么此时bus会自行做出裁决将其中一个置为M另一个置为I)
     4. 此时cpu1将a写回主存并将其置为E，而此时cpu2会重新读取变量a(因为原来的失效了)，此时cpu1和2中的a都变成了S

## 三、Flynn分类法

## 四、CISC与RISC

## 五、流水线技术

## 六、存储系统

## 七、总线系统

## 八、可靠性

## 九、校验码